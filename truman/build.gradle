plugins {
    id 'war'
    id 'org.gretty' version '3.0.3'
}

dependencies {
    compile(project(":spring-context"))
    compile(project(":spring-jdbc"))
    compile(project(":spring-webmvc"))

    compile(project(":spring-test"))

    compile("javax.annotation:javax.annotation-api")
    compile("org.aspectj:aspectjweaver")

    compile group: 'com.zaxxer', name: 'HikariCP', version: '4.0.3'
    compile group: 'mysql', name: 'mysql-connector-java', version: '8.0.23'
    compile group: 'org.mybatis', name: 'mybatis', version: '3.5.6'
    compile group: 'org.mybatis', name: 'mybatis-spring', version: '2.0.6'

    providedCompile("javax.servlet:javax.servlet-api:4.0.1")

    compile("org.slf4j:slf4j-api")
    compile("org.apache.logging.log4j:log4j-slf4j-impl")
    compile("org.apache.logging.log4j:log4j-1.2-api")
    compile("org.apache.logging.log4j:log4j-jcl")
    compile("org.apache.logging.log4j:log4j-jul")
    compile("org.apache.logging.log4j:log4j-core")

    compile("org.junit.platform:junit-platform-launcher")
    compile("org.junit.jupiter:junit-jupiter-engine")
}

sourceSets {
    main {
        java {
//            exclude 'com/diguage/truman/**'
            exclude 'org/**'
        }
    }
}

test {
    // make sure the classes dir is used on the test classpath (required by ResourceTests)
    // When test fixtures are involved, the JAR is used by default
    classpath = sourceSets.main.output.classesDirs + classpath - files(jar.archiveFile)
}
